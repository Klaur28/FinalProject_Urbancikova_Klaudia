<!DOCTYPE html>
<html lang="sk"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      class="h-100">
<head th:replace="~{fragments/layout.html :: head}">
  <!-- Tu sa nahradí hlavička stránky (meta tagy, CSS, JS) z fragmentu layout.html -->
  <title>Prihlásenie</title>
</head>
<body>

<!-- Vloženie spoločného headeru (navigácia) z fragmentu layout.html -->
<header th:replace="~{fragments/layout.html :: header}"></header>

<!-- Hlavný kontajner pre formulár, vycentrovaný vertikálne aj horizontálne -->
<div class="container d-flex justify-content-center align-items-center" style="min-height: 80vh;">
  <div class="card shadow-lg p-4" style="max-width: 400px; width: 100%;">
    <!-- Ikona a nadpis formulára -->
    <div class="text-center mb-4">
      <i class="fas fa-user-lock fa-2x text-primary mb-2"></i>
      <h4 class="fw-bold">Prihlásenie</h4>
    </div>

    <!-- Zobrazenie chybovej správy pri neúspešnom prihlásení -->
    <div th:if="${param.error}" class="alert alert-danger" role="alert">
      Neplatné prihlasovacie údaje.
    </div>

    <!-- Zobrazenie úspešnej správy (flash attribute) pri registrácii -->
    <div th:if="${success}" class="alert alert-success" role="alert" th:text="${success}"></div>

    <!-- Formulár odosielaný na /account/process-login -->
    <form th:action="@{/account/process-login}" method="post">
      <!-- Pole pre e-mail -->
      <div class="mb-3">
        <label for="email" class="form-label">Emailová adresa</label>
        <input id="email"
               name="email"
               type="email"
               class="form-control"
               placeholder="napr. jan@domena.sk"
               required/>
      </div>
      <!-- Pole pre heslo -->
      <div class="mb-3">
        <label for="password" class="form-label">Heslo</label>
        <input id="password"
               name="password"
               type="password"
               class="form-control"
               placeholder="••••••••"
               required/>
      </div>

      <!-- CSRF token zabezpečuje ochranu pred útokmi typu CSRF -->
      <input type="hidden"
             th:name="${_csrf.parameterName}"
             th:value="${_csrf.token}"/>

      <!-- Tlačidlo pre odoslanie formulára -->
      <div class="d-grid">
        <button type="submit" class="btn btn-primary">
          <i class="fas fa-sign-in-alt me-1"></i> Prihlásiť sa
        </button>
      </div>
    </form>

    <!-- Odkaz pre používateľov bez účtu na registračnú stránku -->
    <p class="text-center mt-3 mb-0">
      Nemáte účet? <a th:href="@{/account/register}">Registrujte sa</a>
    </p>
  </div>
</div>

<!-- Vloženie spoločnej päty stránky z fragmentu layout.html -->
<footer th:replace="~{fragments/layout.html :: footer}"></footer>

</body>
</html>
